geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7)
?pivot_wider()
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
install.packages("kableExtra")
library(kableExtra)
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR) %>%
kbl(col.names = c("Mode", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR) %>%
kbl(col.names = c("Mode", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
View(ca_transportation)
ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR) %>%
kbl(col.names = c("Mode", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
ca_transportation <- read_excel("~/Desktop/Data_550/Final/transportation-to-work-1.xlsx")
ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR) %>%
kbl(col.names = c("Mode", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
ca_transportation
library(readxl)
ca_transportation <- read_excel("~/Desktop/Data_550/Final/transportation-to-work-1.xlsx")
ca_transportation <- read_excel("~/Desktop/Data_550/Final/transportation-to-work-1.xlsx")
#checking to see if upload is correct
#View(ca_transportation)
head(ca_transportation)
#need to do some re-arranging data for table 1
library(tidyverse)
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR) %>%
kbl(col.names = c("Mode", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
library(kableExtra)
ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR) %>%
kbl(col.names = c("Mode", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
library(rio)
library(pacman)
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
View(ca_transportation_descriptive)
ca_trans_table_one <- ca_transportation_descriptive %>%
kbl(col.names = c("Mode", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
#using kableExtra to make table 1
library(kableExtra)
ca_trans_table_one <- ca_transportation_descriptive %>%
kbl(col.names = c("Mode", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
ca_transportation_descriptive %>%
kbl(col.names = c("Mode", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23)
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
filter(race_eth_name == "AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White")
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
filter(race_eth_name %in% c("AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White"))
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
filter(race_eth_name %in% c("AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
filter(race_eth_name %in% c("AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White")) %>%
filter(mode %in% c("ATHOME", "BICYCLE", "CARTOTAL", "PUBLICTR", "WALK"))
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
filter(race_eth_name %in% c("AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White")) %>%
filter(mode %in% c("ATHOME", "BICYCLE", "CARTOTAL", "PUBLICTR", "WALK")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
#using kableExtra to make table 1
library(kableExtra)
ca_trans_table_one <- ca_transportation_descriptive %>%
kbl(col.names = c("Mode of Transport", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
ca_transportation_descriptive %>%
kbl(col.names = c("Mode of Transport", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
library(readxl)
ca_transportation <- read_excel("~/Desktop/Data_550/Final/transportation-to-work-1.xlsx")
#checking to see if upload is correct
#View(ca_transportation)
head(ca_transportation)
#need to do some data cleaning and re-arranging for table 1
library(tidyverse)
library(kableExtra)
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
filter(race_eth_name %in% c("AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White")) %>%
filter(mode %in% c("ATHOME", "BICYCLE", "CARTOTAL", "PUBLICTR", "WALK")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
#using kableExtra to make table 1
library(kableExtra)
ca_trans_table_one <- ca_transportation_descriptive %>%
kbl(col.names = c("Mode of Transport", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
#using kableExtra to make table 1
library(kableExtra)
ca_trans_table_one <- ca_transportation_descriptive %>%
kbl(col.names = c("Mode of Transport", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
ca_transportation_descriptive %>%
kbl(col.names = c("Mode of Transport", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
ca_transportation_descriptive %>%
kbl(col.names = c("Mode of Transport", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
View(ca_transportation_descriptive)
View(ca_transportation)
ca_transportation_figure_two <- ca_transportation %>%
filter(reportyear == "2006-2010"
ca_transportation_figure_two <- ca_transportation %>%
ca_transportation_figure_two <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE",
region_name %in% c("Bay Area", "Butte", "Monterey Bay"),
race_eth_name %in% c("AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White"),
mode %in% c("ATHOME", "BICYCLE", "CARTOTAL", "PUBLICTR", "WALK")) %>%
select(race_eth_name, mode, CA_RR)
View(ca_transportation_figure_two)
ggplot(ca_transportation_figure_two, aes(x = race_eth_name, y = CA_RR, color = mode)) +
geom_point() +
labs(title = "Association between Risk Ratio of Transportation Mode and Race/Ethnicity",
x = "Race/Ethnicity",
y = "Risk Ratio",
color = "Mode of Transportation") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ca_transportation_descriptive <- ca_transportation %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
filter(race_eth_name %in% c("AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White")) %>%
filter(mode %in% c("ATHOME", "BICYCLE", "CARTOTAL", "PUBLICTR", "WALK")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
ca_transportation_long <- ca_transportation_descriptive %>%
pivot_longer(cols = c("Bay Area", "Butte", "Monterey Bay"), names_to = "Region", values_to = "Risk_Ratio")
ggplot(ca_transportation_long, aes(x = race_eth_name, y = Risk_Ratio, color = mode)) +
geom_point() +
labs(title = "Association between Risk Ratio of Transportation Mode and Race/Ethnicity by Region",
x = "Race/Ethnicity",
y = "Risk Ratio",
color = "Mode of Transportation") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
facet_wrap(~Region, scales = "free_y")
here::i_am("code/00_clean_data.R")
absolute_path_to_data <- here::here("raw_data", "transportation_to_work.xlsx")
data <- read_excel(absolute_path_to_data, header = TRUE)
?read_excel()
data <- read_excel(absolute_path_to_data)
data %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
filter(race_eth_name %in% c("AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White")) %>%
filter(mode %in% c("ATHOME", "BICYCLE", "CARTOTAL", "PUBLICTR", "WALK")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
# setting working directory
here::i_am("code/00_clean_data.R")
# defining the path to the raw data
absolute_path_to_data <- here::here("raw_data", "transportation_to_work.xlsx")
# load libraries
library(readxl)
library(dplyr)
# read in the raw data
data <- read_excel(absolute_path_to_data)
# clean the data
data_clean <- data %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
filter(race_eth_name %in% c("AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White")) %>%
filter(mode %in% c("ATHOME", "BICYCLE", "CARTOTAL", "PUBLICTR", "WALK")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
# saving the clean data as an RDS in output folder
saveRDS(
data,
file = here::here("output/data_clean.rds")
)
# saving the clean data as an RDS in output folder
saveRDS(
data_clean,
file = here::here("output/data_clean.rds")
)
data_clean <- readRDS("~/Desktop/Data_550/Final/output/data_clean.rds")
view(data_clean)
# saving the clean data as an RDS in output folder
saveRDS(
data_clean,
file = here::here("output/data_clean_test.rds")
)
data_clean_test <- readRDS("~/Desktop/Data_550/Final/output/data_clean_test.rds")
view(data_clean_test)
getwd()
here::i_am("report.Rmd")
here::i_am("code/01_make_table1.R")
saveRDS(
table_one,
file = here::here("output/table_one.rds")
)
table_one <- data_clean %>%
kbl(col.names = c("Mode of Transport", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
saveRDS(
table_one,
file = here::here("output/table_one.rds")
)
data_clean <- readRDS(
file = here::here("output/data_clean.rds")
)
library(kableExtra)
table_one <- data_clean %>%
kbl(col.names = c("Mode of Transport", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Region" = 3))
saveRDS(
table_one,
file = here::here("output/table_one.rds")
)
# reading in the table we created using kableExtra
table_one <- readRDS(
file = here::here("output", "table_one.rds")
)
# now display it
table_one
here::i_am("code/02_make_scatter.R")
data_clean <- readRDS(
file = here::here("output/data_clean.rds")
)
# Reshape data to long format
data_scatter <- data_clean %>%
pivot_longer(cols = c("Bay Area", "Butte", "Monterey Bay"), names_to = "Region", values_to = "Risk_Ratio")
library(ggplot2)
scatterplot <- ggplot(data_figure, aes(x = race_eth_name, y = Risk_Ratio, color = mode)) +
geom_point() +
labs(title = "Risk Ratio of Transportation Mode and Race/Ethnicity by Region",
x = "Race/Ethnicity",
y = "Risk Ratio",
color = "Mode of Transportation") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
facet_wrap(~Region, scales = "free_y")
scatterplot <- ggplot(data_scatter, aes(x = race_eth_name, y = Risk_Ratio, color = mode)) +
geom_point() +
labs(title = "Risk Ratio of Transportation Mode and Race/Ethnicity by Region",
x = "Race/Ethnicity",
y = "Risk Ratio",
color = "Mode of Transportation") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
facet_wrap(~Region, scales = "free_y")
ggsave(
here::here("output/scatterplot.png"),
plot = scatterplot,
device = "png"
)
knitr::include_graphics(
here::here("output", "scatterplot.png")
)
here::i_am("code/03_render_report.R")
here::i_am("code/03_render_report.R")
library(rmarkdown)
render("report.Rmd")
# clean the data
data_clean <- data %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
filter(race_eth_name %in% c("AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White")) %>%
filter(mode %in% c("ATHOME", "BICYCLE", "CARTOTAL", "PUBLICTR", "WALK")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
# setting working directory
here::i_am("code/00_clean_data.R")
# defining the path to the raw data
absolute_path_to_data <- here::here("raw_data", "transportation_to_work.xlsx")
getwd()
here::i_am("report.Rmd")
data <- readRDS(
file = here::here("output", "data_clean.rds")
)
# setting working directory
here::i_am("code/00_clean_data.R")
# defining the path to the raw data
absolute_path_to_data <- here::here("raw_data", "transportation_to_work.xlsx")
# load libraries
library(readxl)
library(dplyr)
# read in the raw data
data <- read_excel(absolute_path_to_data)
# clean the data
data_clean <- data %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
filter(race_eth_name %in% c("AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White")) %>%
filter(mode %in% c("ATHOME", "BICYCLE", "CARTOTAL", "PUBLICTR", "WALK")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
# saving the clean data as an RDS in output folder
saveRDS(
data_clean,
file = here::here("output/data_clean.rds")
)
getwd()
here::i_am("report.Rmd")
data <- readRDS(
file = here::here("output", "data_clean.rds")
)
library(tidyverse)
# reading in the table we created using kableExtra
table_one <- readRDS(
file = here::here("output", "table_one.rds")
)
# load libraries
library(readxl)
library(dplyr)
library(tidyverse)
# read in the raw data
data <- read_excel(absolute_path_to_data)
# clean the data
data_clean <- data %>%
filter(reportyear == "2006-2010",
geotype == "RE") %>%
select(5,11,13,15:17, 23) %>%
select(3, 1, 2, 7) %>%
filter(region_name %in% c("Bay Area", "Butte", "Monterey Bay")) %>%
filter(race_eth_name %in% c("AIAN", "Asian", "AfricanAm", "Latino", "NHOPI", "White")) %>%
filter(mode %in% c("ATHOME", "BICYCLE", "CARTOTAL", "PUBLICTR", "WALK")) %>%
pivot_wider(names_from = region_name, values_from = CA_RR)
# saving the clean data as an RDS in output folder
saveRDS(
data_clean,
file = here::here("output/data_clean.rds")
)
here::i_am("code/01_make_table1.R")
data_clean <- readRDS(
file = here::here("output/data_clean.rds")
)
library(kableExtra)
table_one <- data_clean %>%
kbl(col.names = c("Mode of Transport", "Race", "Bay Area", "Butte", "Monterrey Bay"),
digits = 2) %>%
collapse_rows(columns = 1, valign = "top") %>%
kable_styling(full_width = FALSE) %>%
add_header_above(c(" " = 2, "Risk Ratio by Region" = 3))
saveRDS(
table_one,
file = here::here("output/table_one.rds")
)
# reading in the table we created using kableExtra
table_one <- readRDS(
file = here::here("output", "table_one.rds")
)
# now display it
table_one
